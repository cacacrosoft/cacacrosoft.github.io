<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cacacrosoft Kft.</title>

<style>
  body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
background-image: url('https://raw.githubusercontent.com/cacacrosoft/cacacrosoft.github.io/main/viber_k%C3%A9p_2026-02-19_18-55-10-512.jpg
');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-color: #333;
    color: white;
    text-shadow: 1px 1px 5px black;
  }

  .topnav {
    display: flex;
    background-color: #333;
    overflow: visible;
    z-index: 100;
    position: relative;
  }

  .topnav a {
    padding: 14px 16px;
    text-decoration: none;
    color: white;
    font-size: 17px;
    cursor: pointer;
    display: inline-block;
  }

  .topnav a.active { background-color: #312abd; color: white; }
  .topnav a:hover { background-color: #ddd; color: black; }

  .dropdown-container {
    position: relative;
    display: inline-block;
  }

  .menu5r {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: rgba(0, 0, 0, 0.9);
    border-radius: 0 0 12px 12px;
    padding: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    z-index: 5000;
    min-width: 180px;
  }

  .menu5r button {
    display: block;
    width: 100%;
    background: none;
    border: none;
    color: white;
    padding: 12px 20px;
    text-align: left;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    white-space: nowrap;
  }

  .menu5r button:hover { background: #312abd; }

  .content { display: none; padding: 20px; }
  .content.active { display: block; }

  .video-wrapper {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    max-width: 900px;
    margin-top: 20px;
  }
  .video-wrapper video { position: absolute; width: 100%; height: 100%; }

  .modal {
    display: none;
    position: fixed;
    z-index: 6000;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
  }

  .modal-content {
    background: white;
    color: black;
    padding: 30px;
    width: 300px;
    margin: 15% auto;
    text-align: center;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    position: relative;
  }

  .modal-content input { padding: 10px; width: 80%; margin-bottom: 10px; border-radius:5px; border:1px solid #ccc; }
  .modal-content button { padding:10px 20px; margin:5px; border:none; border-radius:5px; background:#F54927; color:white; font-weight:bold; cursor:pointer; }

  #snake-canvas { border: 5px solid #04AA6D; background-color: #000; display: block; margin: 20px auto; box-shadow: 0 0 20px #04AA6D; }
  .seat-map { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; max-width: 500px; margin: 20px auto; }
  .seat { width: 100%; aspect-ratio: 1/1; background: #4caf50; border-radius: 6px 6px 2px 2px; cursor: pointer; }
  .seat.occupied { background: #f44336; cursor: not-allowed; }
  #loadingOverlay { position: fixed; inset: 0; background: black; display: none; align-items: center; justify-content: center; z-index: 99999; }
/* üì± MOBIL N√âZET */
@media (max-width: 768px) {

  body {
    background-attachment: scroll; /* mobilon ne laggoljon */
  }

  /* Fels≈ë men√º */
  .topnav {
    flex-wrap: wrap;
  }

  .topnav a {
    font-size: 15px;
    padding: 12px;
    flex: 1 1 50%;
    text-align: center;
  }

  /* Dropdown men√ºk */
  .menu5r {
    position: static;
    width: 100%;
    margin-top: 5px;
  }

  .menu5r button {
    font-size: 15px;
    padding: 14px;
  }

  /* Vide√≥k */
  .video-wrapper {
    max-width: 100%;
  }

  video {
    max-width: 100%;
    height: auto;
  }

  /* K√©pek */
  img {
    max-width: 100%;
    height: auto;
  }

  /* Snake j√°t√©k */
  #snake-canvas {
    width: 100%;
    height: auto;
  }

  /* Modal */
  .modal-content {
    width: 90%;
    margin-top: 30%;
  }

  /* Mozi sz√©kek */
  .seat-map {
    grid-template-columns: repeat(4, 1fr);
  }

  /* Inputok */
  input, textarea, button {
    font-size: 16px; /* iOS zoom fix */
  }
}


/* ===== DESIGNES DROPDOWN FELTUNING ===== */
.menu5r {
  animation: dropdownFade 0.25s ease;
  backdrop-filter: blur(8px);
}

@keyframes dropdownFade {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.menu5r button {
  transition:
    background 0.2s ease,
    transform 0.15s ease,
    box-shadow 0.15s ease;
}

.menu5r button:hover {
  transform: translateX(6px);
  box-shadow: inset 4px 0 0 #04AA6D;
}

/* Men√º nyit√≥ gomb design */
.dropdown-container > a {
  position: relative;
  font-weight: bold;
}

.dropdown-container > a::after {
  content: "";
  position: absolute;
  left: 10%;
  bottom: 6px;
  width: 80%;
  height: 2px;
  background: #04AA6D;
  transform: scaleX(0);
  transition: transform 0.2s ease;
}

.dropdown-container > a:hover::after {
  transform: scaleX(1);
}

#emojiPicker span {
  font-size: 22px;
  cursor: pointer;
  padding: 4px;
  display: inline-block;
}

#emojiPicker span:hover {
  background: #444;
  border-radius: 6px;
}

</style>
</head>
<body>

<div id="loadingOverlay">
  <video autoplay muted loop style="width: 300px;">
    <source src="Loading.mp4" type="video/mp4">
  </video>
</div>

<div class="topnav">
  <a onclick="showContent('learazasok')" id="learazasokLink" class="active">F≈ëoldal</a>
  <a onclick="showContent('hirek')" id="hirekLink">H√≠rek</a>
  <a onclick="showContent('vibercsoportok')" id="vibercsoportokLink">Viber</a>
  <a onclick="showContent('cardok')" id="cardokLink">Cardok</a>
  <a onclick="showContent('jatek'); initSnake();" id="jatekLink">Snake</a>
   <a onclick="showContent('fa')" id="faLink">Fa</a>

  <div class="dropdown-container">
    <a onclick="toggle5rMenu()" id="otrLink">5.R ‚ñæ</a>
    <div id="menu5r" class="menu5r">
      <button onclick="openTestProtected()">‚ñ∂Ô∏è 5.R Tube</button>
      <button onclick="openMoziProtected()">üé¨ Mozi</button>
      <button onclick="openStudiModal(1)">üë®‚Äçüè´ Teacher 5.R</button>
      <button onclick="openStudentModal()">üéì Study</button>
      <button onclick="openStudiModal5a()">üí¨ 5.r chat</button>
    </div>
  </div>

  <div class="dropdown-container">
    <a onclick="toggle5aMenu()" id="otaLink">privi ‚ñæ</a>
    <div id="menu5a" class="menu5r">
      <button onclick="openTestProtected5a()">caca ablak</button>

      <button onclick="openStudentModal5a()">ellen√∂rz≈ë</button>
    </div>
  </div>
</div>

<div id="learazasok" class="content active">
  <h2>√údv√∂zli a Cacacrosoft!</h2>
  <div class="video-wrapper"><video controls><source src="https://marcell.qzz.io/cacaudv.mp4" type="video/mp4"></video></div>
  <img src="k.png" width="250" style="margin-top:20px;">
</div>

<div id="hirek" class="content">
  <h2>H√≠rek:</h2>
  <img src="viber_k√©p_2026-01-26_19-30-58-438.png" width="250">
  <p>Fenntart√≥: Stefk√≥ Soma √©s Tettamanti Marcell <br> Email: tettamantimarcell@gmail.com</p>
</div>
<div id="vibercsoportok" class="content">
  <h2>üì£ Viber csatorna</h2>

  <a href="https://invite.viber.com/?g2=AQAsPNwakIHg%2BVXE9FrFTDgbD6Hs%2BC5saVTbiIJJx%2BgNaCuY955QP%2BuoN7T9veGx"
     target="_blank"
     style="display:inline-block; padding:15px 25px; background:#7360f2; color:white; text-decoration:none; border-radius:8px; margin-bottom:20px;">
     üëâ Csatlakoz√°s a csatorn√°hoz
  </a>

  <h3 style="margin-top:30px;">üì∞ Legut√≥bbi bejegyz√©sek</h3>
  <div id="viberFeed"
       style="margin-top:15px; background:rgba(0,0,0,0.6); padding:15px; border-radius:10px;">
    Bet√∂lt√©s‚Ä¶
  </div>
</div>


<div id="cardok" class="content">
  <h2>Caca Card kedvezm√©ny!</h2>
  <img src="caca club card.jpg" width="250">
</div>

<div id="test" class="content">
  <h2 id="tubeTitle">Tube</h2>
  <img src="Slide2.jpg" width="250">
  <input type="text" id="searchInput" placeholder="Keres√©s..." onkeyup="filterFiles()" style="padding:10px; border-radius:5px; width:200px;">
  <div id="dynamicFileList" style="margin-top:20px;"></div>
</div>

<div id="mozi" class="content">
  <button onclick="openClearMoziModal()" style="padding:10px; background:#f44336; color:white; border:none; border-radius:5px; cursor:pointer;">üóë Mozi ki√ºr√≠t√©se</button>
  <h2>V√°lassz helyet</h2>
  <div id="seatMap" class="seat-map"></div>
</div>

<div id="jatek" class="content">
  <h2>Score: <span id="scoreVal">0</span></h2>
  <div style="position: relative; width: 400px; margin: 0 auto;">
    <canvas id="snake-canvas" width="400" height="400"></canvas>
    <div id="playOverlay" style="position: absolute; inset:0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center;">
      <button onclick="startGameNow()" style="padding: 20px; background: #04AA6D; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">PLAY!</button>
    </div>
  </div>
</div>

<div id="studiContent1" class="content">
  <h2>üë®‚Äçüè´ Teacher 5.R - H√°zi feladatok</h2>
  <form id="homeworkForm">
    Tant√°rgy: <input type="text" id="subject" required style="color:black; padding:5px;"><br><br>
    Sz√∂veg: <textarea id="text" required style="color:black; padding:5px; width:100%; max-width:400px;"></textarea><br><br>
    <button type="submit" style="padding:10px 20px; background:#04AA6D; color:white; border:none; border-radius:5px; cursor:pointer;">Bek√ºld√©s</button>
  </form>
  <h3>Bek√ºld√∂tt feladatok:</h3>
  <ul id="submittedHomeworks"></ul>
</div>

<div id="studentContent" class="content">
 <h1>Hirdess itt 2 palack√©rt!</h1>
  <h2>üéì Study 5.R - H√°zi feladatok</h2>
  <h3>Bek√ºld√∂tt feladatok (5.R):</h3>
  <ul id="studentHomeworksList"></ul>
</div>

<div id="studiContent5a" class="content">
<h1>Hirdess itt 2 palack√©rt!</h1>
  <form id="homeworkForm5a">
    N√©v <input type="text" id="subject5a" required style="color:black; padding:5px;"><br><br>
    Sz√∂veg: <textarea id="text5a" required style="color:black; padding:5px; width:100%; max-width:400px;"></textarea><br><br>
    <button type="submit" style="padding:10px 20px; background:#04AA6D; color:white; border:none; border-radius:5px; cursor:pointer;">Bek√ºld√©s</button>
  </form>
  <div style="margin-top:6px; position:relative;">
  <button type="button" onclick="toggleEmojiPicker()"
    style="padding:6px 12px; border-radius:6px; border:none; cursor:pointer;">
    üòÄ Emoji
  </button>

  <div id="emojiPicker"
       style="
         display:none;
         position:absolute;
         bottom:40px;
         left:0;
         width:260px;
         max-height:200px;
         overflow-y:auto;
         background:#222;
         border-radius:10px;
         padding:8px;
         box-shadow:0 10px 30px rgba(0,0,0,.6);
         z-index:9999;
       ">
  </div>
</div>

  <h3>Csak a caca</h3>
  <ul id="submittedHomeworks5a"></ul>
</div>

<div id="studentContent5a" class="content">
 <h1>Hirdess itt 2 palack√©rt!</h1>
  <h2>Study - H√°zi feladatok</h2>
  <h3>Bek√ºld√∂tt feladatok:</h3>
  <ul id="studentHomeworksList5a"></ul>
</div>

<div id="testModal" class="modal"><div class="modal-content"><h2>Tube k√≥d (5.R)</h2><input type="password" id="testCode" onkeydown="if(event.key==='Enter') checkTestCode()"><br><button onclick="checkTestCode()">Bel√©p√©s</button><button onclick="closeTest()">M√©gse</button><p id="testError" style="color:red;"></p></div></div>
<div id="testModal5a" class="modal"><div class="modal-content"><h2>Tube k√≥d (5.A)</h2><input type="password" id="testCode5a" onkeydown="if(event.key==='Enter') checkTestCode5a()"><br><button onclick="checkTestCode5a()">Bel√©p√©s</button><button onclick="closeTest5a()">M√©gse</button><p id="testError5a" style="color:red;"></p></div></div>
<div id="moziModal" class="modal"><div class="modal-content"><h2>Mozi k√≥d</h2><input type="password" id="moziCode" onkeydown="if(event.key==='Enter') checkMoziCode()"><br><button onclick="checkMoziCode()">Bel√©p√©s</button><button onclick="closeMozi()">M√©gse</button><p id="moziError" style="color:red;"></p></div></div>
<div id="clearMoziModal" class="modal"><div class="modal-content"><h2>Admin</h2><input type="password" id="clearMoziCode" onkeydown="if(event.key==='Enter') checkClearMoziCode()"><br><button onclick="checkClearMoziCode()">T√∂rl√©s</button><button onclick="closeClearMozi()">M√©gse</button></div></div>
<div id="studiModal1" class="modal"><div class="modal-content"><h2>Tan√°ri k√≥d (5.R)</h2><input type="password" id="studiCode1" onkeydown="if(event.key==='Enter') checkStudiCode(1)"><br><button onclick="checkStudiCode(1)">Bel√©p√©s</button><button onclick="closeStudi(1)">M√©gse</button><p id="studiError1" style="color:red;"></p></div></div>
<div id="studentModal" class="modal"><div class="modal-content"><h2>Di√°k k√≥d (5.R)</h2><input type="password" id="studentCode" onkeydown="if(event.key==='Enter') checkStudentCode()"><br><button onclick="checkStudentCode()">Bel√©p√©s</button><button onclick="closeStudentModal()">M√©gse</button><p id="studentError" style="color:red;"></p></div></div>
<div id="studiModal5a" class="modal"><div class="modal-content"><h2>Chat k√≥d</h2><input type="password" id="studiCode5a" onkeydown="if(event.key==='Enter') checkStudiCode5a()"><br><button onclick="checkStudiCode5a()">Bel√©p√©s</button><button onclick="closeStudi5a()">M√©gse</button><p id="studiError5a" style="color:red;"></p></div></div>
<div id="studentModal5a" class="modal"><div class="modal-content"><h2>ellen√∂rz≈ë k√≥d</h2><input type="password" id="studentCode5a" onkeydown="if(event.key==='Enter') checkStudentCode5a()"><br><button onclick="checkStudentCode5a()">Bel√©p√©s</button><button onclick="closeStudentModal5a()">M√©gse</button><p id="studentError5a" style="color:red;"></p></div></div>

<div id="fa" class="content">
  <h2>üå≥ Fa</h2>
  <h3>Fa 10 pro v√°s√°rl√°sa </h3>
  <button onclick="showFaForm()" style="padding:12px 20px; background:#04AA6D; color:white; border:none; border-radius:8px; cursor:pointer;">
    N√©v megad√°sa
  </button>

  <div id="faForm" style="display:none; margin-top:20px;">
    <input type="text" id="faName" placeholder="√çrd be a neved"
      style="padding:10px; width:250px; border-radius:6px; border:none; color:black;"><br><br>

    <button onclick="sendFaMail()" style="padding:10px 20px; background:#312abd; color:white; border:none; border-radius:8px; cursor:pointer;">
      K√ºld√©s
    </button>
  </div>
</div>


<script>
const TEST_CODE = "caca123", MOZI_CODE = "caca123", TANAR_CODE = "caca123", CLEAR_MOZI_CODE = "admin_mozi", STUDENT_CODE = "caca123", STUDENT_CODE5A = "caca456";
const serverUrl = "https://marcell.qzz.io/";

function showContent(id) {
  document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
  document.querySelectorAll('.topnav a').forEach(a => a.classList.remove('active'));
  const target = document.getElementById(id);
  if(target) target.classList.add('active');
  if(document.getElementById(id+'Link')) document.getElementById(id+'Link').classList.add('active');
  document.getElementById("menu5r").style.display = "none";
  document.getElementById("menu5a").style.display = "none";
  if(id === 'studiContent1' || id === 'studentContent') loadHomeworks();
  if(id === 'studiContent5a' || id === 'studentContent5a') loadHomeworks5a();
if(id === 'vibercsoportok') loadViberPosts();
}

function toggle5rMenu() { document.getElementById("menu5a").style.display = "none"; const m = document.getElementById("menu5r"); m.style.display = (m.style.display === "block") ? "none" : "block"; }
function toggle5aMenu() { document.getElementById("menu5r").style.display = "none"; const m = document.getElementById("menu5a"); m.style.display = (m.style.display === "block") ? "none" : "block"; }

// TUBE LOGIKA - 5.R
function openTestProtected() { document.getElementById("testModal").style.display="block"; }
function closeTest() { document.getElementById("testModal").style.display="none"; }
function checkTestCode() {
  if(document.getElementById("testCode").value === TEST_CODE) {
    closeTest();
    document.getElementById("tubeTitle").innerText = "5.R Tube";
    showContent('test');
    loadFilesFromServer('');
  } else document.getElementById("testError").innerText="Hib√°s!";
}

// TUBE LOGIKA - 5.A
function openTestProtected5a() { document.getElementById("testModal5a").style.display="block"; }
function closeTest5a() { document.getElementById("testModal5a").style.display="none"; }
function checkTestCode5a() {
  if(document.getElementById("testCode5a").value === STUDENT_CODE5A) {
    closeTest5a();
    document.getElementById("tubeTitle").innerText = "5.A Tube";
    showContent('test');
    loadFilesFromServer('5a');
  } else document.getElementById("testError5a").innerText="Hib√°s!";
}

// F√ÅJLOK LIST√ÅZ√ÅSA (Mappa param√©terrel)
async function loadFilesFromServer(folder) {
  showLoading();
  try {
    // 1. A lek√©r√©sn√©l HASZN√ÅLJUK az /api/ el≈ëtagot, mert a b√∂ng√©sz≈ëben is √≠gy m≈±k√∂d√∂tt!
    const res = await fetch(`${serverUrl}api/get-videos?folder=${folder}`);
    const files = await res.json();

    const list = document.getElementById("dynamicFileList");
    list.innerHTML = "";

    // 2. A linkekn√©l (href) viszont NEM kell az api/, mert a vide√≥k a f≈ëmapp√°ban vannak
    const pathPrefix = folder ? folder + '/' : '';

    files.forEach(f => {
      if(f.name.endsWith('.mp4')) {
        // √çgy a link pl.: https://marcell.qzz.io/5a/video.mp4 lesz
        list.innerHTML += `<a href="${serverUrl}${pathPrefix}${f.name}" class="file-item" target="_blank" style="display:block; color:#0f0; margin-bottom:10px; text-decoration:none; font-size:18px;">‚ñ∂Ô∏è ${f.name}</a>`;
      }
    });

    if(files.length === 0) list.innerHTML = "<p>Nincsenek vide√≥k ebben a mapp√°ban.</p>";

  } catch(e) {
    console.error("Hiba:", e);
    document.getElementById("dynamicFileList").innerHTML = "Hiba a bet√∂lt√©skor.";
  } finally {
    hideLoading();
  }
}



// H√ÅZI FELADATOK BET√ñLT√âSE
async function loadHomeworks() {
  try {
    const res = await fetch(serverUrl + 'hazifeladatok.json?t=' + Date.now());
    if(res.ok) {
      const h = await res.json();
      const html = h.map(i => `<li style="margin-bottom:8px;">[${i.date}] <b>${i.tantargy || i.subject}</b>: ${i.szoveg || i.text}</li>`).join('');
      document.getElementById("submittedHomeworks").innerHTML = html;
      document.getElementById("studentHomeworksList").innerHTML = html;
    }
  } catch(e) {}
}

async function loadHomeworks5a() {
  try {
    const res = await fetch(serverUrl + 'hazifeladatok_5a.json?t=' + Date.now());
    if(res.ok) {
      const h = await res.json();
      const html = h.map(i => `<li style="margin-bottom:8px;">[${i.date}] <b>${i.subject}</b>: ${i.text}</li>`).join('');
      document.getElementById("submittedHomeworks5a").innerHTML = html;
      document.getElementById("studentHomeworksList5a").innerHTML = html;
    }
  } catch(e) {}
}

// ESEM√âNYKEZEL≈êK
document.getElementById("homeworkForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const data = { tantargy: document.getElementById("subject").value, szoveg: document.getElementById("text").value, date: new Date().toLocaleString('hu-HU') };
  fetch(serverUrl + 'save-hazi', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) }).then(() => { loadHomeworks(); this.reset(); });
});

document.getElementById("homeworkForm5a").addEventListener("submit", function(e) {
  e.preventDefault();
  const data = { subject: document.getElementById("subject5a").value, text: document.getElementById("text5a").value, date: new Date().toLocaleString('hu-HU') };
  fetch(serverUrl + 'save-hazi-5a', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) }).then(() => { loadHomeworks5a(); this.reset(); });
});

function filterFiles() {
  let val = document.getElementById("searchInput").value.toLowerCase();
  document.querySelectorAll(".file-item").forEach(i => i.style.display = i.innerText.toLowerCase().includes(val) ? "block" : "none");
}

// MOZI √âS EGY√âB FUNKCI√ìK (V√°ltozatlan k√≥d)
function openMoziProtected() { document.getElementById("moziModal").style.display="block"; }
function closeMozi() { document.getElementById("moziModal").style.display="none"; }
function checkMoziCode() { if(document.getElementById("moziCode").value === MOZI_CODE) { closeMozi(); showContent('mozi'); } else document.getElementById("moziError").innerText="Hib√°s!"; }
function openStudiModal(n) { document.getElementById("studiModal1").style.display="block"; }
function closeStudi(n) { document.getElementById("studiModal1").style.display="none"; }
function checkStudiCode(n) { if(document.getElementById("studiCode1").value === TANAR_CODE) { closeStudi(1); showContent('studiContent1'); } else document.getElementById("studiError1").innerText="Hib√°s!"; }
function openStudentModal() { document.getElementById("studentModal").style.display="block"; }
function closeStudentModal() { document.getElementById("studentModal").style.display="none"; }
function checkStudentCode() { if(document.getElementById("studentCode").value === STUDENT_CODE) { closeStudentModal(); showContent('studentContent'); } else document.getElementById("studentError").innerText="Hib√°s!"; }
function openStudiModal5a() { document.getElementById("studiModal5a").style.display="block"; }
function closeStudi5a() { document.getElementById("studiModal5a").style.display="none"; }
function checkStudiCode5a() { if(document.getElementById("studiCode5a").value === TANAR_CODE) { closeStudi5a(); showContent('studiContent5a'); } else document.getElementById("studiError5a").innerText="Hib√°s!"; }
function openStudentModal5a() { document.getElementById("studentModal5a").style.display="block"; }
function closeStudentModal5a() { document.getElementById("studentModal5a").style.display="none"; }
function checkStudentCode5a() { if(document.getElementById("studentCode5a").value === STUDENT_CODE5A) { closeStudentModal5a(); showContent('studentContent5a'); } else document.getElementById("studentError5a").innerText="Hib√°s!"; }

function loadSeats() {
  const map = document.getElementById("seatMap"); map.innerHTML = "";
  for(let i=1; i<=12; i++) {
    const s = document.createElement("div"); s.className = "seat" + (localStorage.getItem("seat_"+i) ? " occupied" : "");
    s.onclick = () => { if(!s.classList.contains("occupied")) { const n = prompt("N√©v:"); if(n) { localStorage.setItem("seat_"+i, n); s.classList.add("occupied"); } } };
    map.appendChild(s);
  }
}
loadSeats();
function openClearMoziModal() { document.getElementById("clearMoziModal").style.display="block"; }
function closeClearMozi() { document.getElementById("clearMoziModal").style.display="none"; }
function checkClearMoziCode() { if(document.getElementById("clearMoziCode").value === CLEAR_MOZI_CODE) { localStorage.clear(); loadSeats(); closeClearMozi(); } }

let canvas = document.getElementById("snake-canvas"), ctx = canvas.getContext("2d"), box = 20, snake, food, d, score, gameInterval;
function startGameNow() { document.getElementById("playOverlay").style.display="none"; initSnake(); }
function initSnake() { clearInterval(gameInterval); d=null; score=0; snake=[{x:9*box, y:10*box}]; food={x:Math.floor(Math.random()*19+1)*box, y:Math.floor(Math.random()*19+1)*box}; gameInterval = setInterval(draw, 120); }
document.addEventListener("keydown", e => { if(e.keyCode==37 && d!="RIGHT") d="LEFT"; else if(e.keyCode==38 && d!="DOWN") d="UP"; else if(e.keyCode==39 && d!="LEFT") d="RIGHT"; else if(e.keyCode==40 && d!="UP") d="DOWN"; });
function draw() {
  ctx.fillStyle="black"; ctx.fillRect(0,0,400,400);
  snake.forEach((s,i) => { ctx.fillStyle=(i==0)?"#04AA6D":"white"; ctx.fillRect(s.x, s.y, box, box); });
  ctx.fillStyle="red"; ctx.fillRect(food.x, food.y, box, box);
  let headX = snake[0].x, headY = snake[0].y;
  if(d=="LEFT") headX-=box; if(d=="UP") headY-=box; if(d=="RIGHT") headX+=box; if(d=="DOWN") headY+=box;
  if(headX==food.x && headY==food.y) { score++; food={x:Math.floor(Math.random()*19+1)*box, y:Math.floor(Math.random()*19+1)*box}; } else { snake.pop(); }
  let newHead = {x:headX, y:headY};
  if(headX<0||headX>=400||headY<0||headY>=400||snake.some(s=>s.x==newHead.x && s.y==newHead.y)) { clearInterval(gameInterval); alert("V√©ge! Pont: "+score); document.getElementById("playOverlay").style.display="flex"; }
  snake.unshift(newHead); document.getElementById("scoreVal").innerText=score;
}
function showLoading() { document.getElementById("loadingOverlay").style.display="flex"; }
function hideLoading() { document.getElementById("loadingOverlay").style.display="none"; }

function showFaForm() {
  document.getElementById("faForm").style.display = "block";
}

function sendFaMail() {
  const name = document.getElementById("faName").value.trim();
  if (!name) {
    alert("√çrd be a neved!");
    return;
  }

  const subject = encodeURIComponent("Fa jelentkez√©s");
  const body = encodeURIComponent("N√©v: " + name);

  window.open(
    `https://mail.google.com/mail/?view=cm&fs=1&to=tettamantimarcell@gmail.com&su=${subject}&body=${body}`,
    "_blank"
  );
}

async function loadViberPosts() {
  try {
    const res = await fetch("viber_posts.json?t=" + Date.now());
    const posts = await res.json();

    const html = posts.map(p =>
      `<div style="margin-bottom:12px; padding-bottom:10px; border-bottom:1px solid #555;">
        <div style="font-size:13px; color:#ccc;">${p.date}</div>
        <div style="font-size:16px;">${p.text}</div>
      </div>`
    ).join("");

    document.getElementById("viberFeed").innerHTML =
      html || "Nincs m√©g bejegyz√©s.";
  } catch (e) {
    document.getElementById("viberFeed").innerText =
      "Nem siker√ºlt bet√∂lteni.";
  }
}

document.querySelectorAll(".menu5r button, .topnav a").forEach(el => {
  el.addEventListener("click", () => {
    const s = document.getElementById("clickSound");
    if(s) { s.currentTime = 0; s.play(); }
  });
});
   const EMOJIS = `
üòÄ üòÉ üòÑ üòÅ üòÜ üòÖ üòÇ ü§£ üòä üòá üôÇ
üôÉ üòâ üòå üòç ü•∞ üòò üòó üòô üòö
üòã üòõ üòù üòú ü§™ ü§® üßê ü§ì üòé
üòè üòí üòû üòî üòü üòï üôÅ ‚òπÔ∏è
üò£ üòñ üò´ üò© ü•∫ üò¢ üò≠ üò§
üò† üò° ü§¨ ü§Ø üò≥ ü•µ ü•∂ üò±
ü§ó ü§î ü´° ü§´ ü§≠ ü´¢ ü´£
üëç üëé üëä ‚úä ü§ù üôè üëè
‚ù§Ô∏è üß° üíõ üíö üíô üíú üñ§ ü§ç
üî• üíØ üéâ üéä üéà üöÄ ‚≠ê üåü
`.trim().split(/\s+/);

const picker = document.getElementById("emojiPicker");
const textarea = document.getElementById("text5a");

// felt√∂ltj√ºk a panelt
EMOJIS.forEach(e => {
  const s = document.createElement("span");
  s.textContent = e;
  s.onclick = () => {
    textarea.value += e;
    textarea.focus();
  };
  picker.appendChild(s);
});

function toggleEmojiPicker() {
  picker.style.display =
    picker.style.display === "block" ? "none" : "block";
}

// kattint√°s m√°shol ‚Üí bez√°r
document.addEventListener("click", e => {
  if (!picker.contains(e.target) && e.target.innerText !== "üòÄ Emoji") {
    picker.style.display = "none";
  }
});


</script>
</body>
<audio id="clickSound" src="mouse-click-sound.mp3"></audio>

</html>
