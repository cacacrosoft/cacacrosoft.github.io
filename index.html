<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cacacrosoft Kft.</title>

<style>
  body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background-image: url('Caca.png');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-color: #333;
    color: white;
    text-shadow: 1px 1px 5px black;
  }

  .topnav {
    display: flex;
    background-color: #333;
    overflow: visible;
    z-index: 100;
    position: relative;
  }

  .topnav a {
    padding: 14px 16px;
    text-decoration: none;
    color: white;
    font-size: 17px;
    cursor: pointer;
    display: inline-block;
  }

  .topnav a.active { background-color: #312abd; color: white; }
  .topnav a:hover { background-color: #ddd; color: black; }

  .dropdown-container {
    position: relative;
    display: inline-block;
  }

  .menu5r {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: rgba(0, 0, 0, 0.9);
    border-radius: 0 0 12px 12px;
    padding: 10px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    z-index: 5000;
    min-width: 180px;
  }

  .menu5r button {
    display: block;
    width: 100%;
    background: none;
    border: none;
    color: white;
    padding: 12px 20px;
    text-align: left;
    font-size: 16px;
    cursor: pointer;
    border-radius: 8px;
    white-space: nowrap;
  }

  .menu5r button:hover { background: #312abd; }

  .content { display: none; padding: 20px; }
  .content.active { display: block; }

  .video-wrapper {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    max-width: 900px;
    margin-top: 20px;
  }
  .video-wrapper video { position: absolute; width: 100%; height: 100%; }

  .modal {
    display: none;
    position: fixed;
    z-index: 6000;
    left: 0; top: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.8);
  }

  .modal-content {
    background: white;
    color: black;
    padding: 30px;
    width: 300px;
    margin: 15% auto;
    text-align: center;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    position: relative;
  }

  .modal-content input { padding: 10px; width: 80%; margin-bottom: 10px; border-radius:5px; border:1px solid #ccc; }
  .modal-content button { padding:10px 20px; margin:5px; border:none; border-radius:5px; background:#F54927; color:white; font-weight:bold; cursor:pointer; }

  /* Snake & Mozi Styles maradnak eredetiben */
  #snake-canvas { border: 5px solid #04AA6D; background-color: #000; display: block; margin: 20px auto; box-shadow: 0 0 20px #04AA6D; }
  .seat-map { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; max-width: 500px; margin: 20px auto; }
  .seat { width: 100%; aspect-ratio: 1/1; background: #4caf50; border-radius: 6px 6px 2px 2px; cursor: pointer; }
  .seat.occupied { background: #f44336; cursor: not-allowed; }
  #loadingOverlay { position: fixed; inset: 0; background: black; display: none; align-items: center; justify-content: center; z-index: 99999; }
</style>
</head>
<body>

<div id="loadingOverlay">
  <video autoplay muted loop style="width: 300px;">
    <source src="Loading.mp4" type="video/mp4">
  </video>
</div>

<div class="topnav">
  <a onclick="showContent('learazasok')" id="learazasokLink" class="active">F≈ëoldal</a>
  <a onclick="showContent('hirek')" id="hirekLink">H√≠rek</a>
  <a onclick="showContent('vibercsoportok')" id="vibercsoportokLink">Viber</a>
  <a onclick="showContent('cardok')" id="cardokLink">Cardok</a>
  <a onclick="showContent('jatek'); initSnake();" id="jatekLink">Snake</a>
  <div class="dropdown-container">
    <a onclick="toggle5rMenu()" id="otrLink">5.r ‚ñæ</a>
    <div id="menu5r" class="menu5r">
      <button onclick="openTestProtected()">‚ñ∂Ô∏è 5.r Tube</button>
      <button onclick="openMoziProtected()">üé¨ Mozi</button>
      <button onclick="openStudiModal(1)">üë®‚Äçüè´ Teacher 5.R</button>
	  <button onclick="openStudentModal()">üéì Student 5.R</button>  
    </div>
  </div>
</div>

<div id="learazasok" class="content active">
  <h2>√údv√∂zli a Cacacrosoft!</h2>
  <div class="video-wrapper"><video controls><source src="https://marcell.qzz.io/cacaudv.mp4" type="video/mp4"></video></div>
  <img src="k.png" width="250" style="margin-top:20px;">
</div>

<div id="hirek" class="content">
  <h2>H√≠rek:</h2>
  <img src="viber_k√©p_2026-01-26_19-30-58-438.png" width="250">
  <p>Fenntart√≥: Stefk√≥ Soma √©s Tettamanti Marcell <br> Email: tettamantimarcell@gmail.com</p>
</div>

<div id="vibercsoportok" class="content">
  <h2>Viber csoport</h2>
  <a href="https://invite.viber.com/?g2=AQAsPNwakIHg%2BVXE9FrFTDgbD6Hs%2BC5saVTbiIJJx%2BgNaCuY955QP%2BuoN7T9veGx" target="_blank" style="display:inline-block; padding:15px 25px; background:#7360f2; color:white; text-decoration:none; border-radius:8px;">Csatlakoz√°s</a>
</div>

<div id="cardok" class="content">
  <h2>Caca Card kedvezm√©ny!</h2>
  <img src="caca club card.jpg" width="250">
</div>

<div id="test" class="content">
  <h2>5.r Tube</h2>
  <img src="Slide2.jpg" width="300">

  <input type="text" id="searchInput" placeholder="Keres√©s..." onkeyup="filterFiles()" style="padding:10px; border-radius:5px; width:200px;">
  <div id="dynamicFileList" style="margin-top:20px;"></div>
</div>

<div id="mozi" class="content">
  <button onclick="openClearMoziModal()" style="padding:10px; background:#f44336; color:white; border:none; border-radius:5px; cursor:pointer;">üóë Mozi ki√ºr√≠t√©se</button>
  <h2>V√°lassz helyet</h2>
  <div id="seatMap" class="seat-map"></div>
</div>

<div id="jatek" class="content">
  <h2>Score: <span id="scoreVal">0</span></h2>
  <div style="position: relative; width: 400px; margin: 0 auto;">
    <canvas id="snake-canvas" width="400" height="400"></canvas>
    <div id="playOverlay" style="position: absolute; inset:0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center;">
      <button onclick="startGameNow()" style="padding: 20px; background: #04AA6D; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">PLAY!</button>
    </div>
  </div>
</div>

<div id="studiContent1" class="content">
  <h2>üë®‚Äçüè´ Teacher 5.R - H√°zi feladatok</h2>
  <form id="homeworkForm">
    Tant√°rgy: <input type="text" id="subject" required style="color:black; padding:5px;"><br><br>
    Sz√∂veg: <textarea id="text" required style="color:black; padding:5px; width:100%; max-width:400px;"></textarea><br><br>
    <button type="submit" style="padding:10px 20px; background:#04AA6D; color:white; border:none; border-radius:5px; cursor:pointer;">Bek√ºld√©s</button>
  </form>
  <p id="message"></p>
  <h3>Bek√ºld√∂tt feladatok:</h3>
  <ul id="submittedHomeworks"></ul>
</div>

<div id="studentContent" class="content">
  <h2>üéì Student 5.R - H√°zi feladatok</h2>
  <h3>Bek√ºld√∂tt feladatok:</h3>
  <ul id="studentHomeworksList"></ul>
</div>

<div id="studentModal" class="modal"><div class="modal-content"><h2>Di√°k k√≥d</h2><input type="password" id="studentCode" onkeydown="if(event.key==='Enter') checkStudentCode()"><br><button onclick="checkStudentCode()">Bel√©p√©s</button><button onclick="closeStudentModal()">M√©gse</button><p id="studentError" style="color:red;"></p></div></div>
<div id="testModal" class="modal"><div class="modal-content"><h2>Tube k√≥d</h2><input type="password" id="testCode" onkeydown="if(event.key==='Enter') checkTestCode()"><br><button onclick="checkTestCode()">Bel√©p√©s</button><button onclick="closeTest()">M√©gse</button><p id="testError" style="color:red;"></p></div></div>
<div id="moziModal" class="modal"><div class="modal-content"><h2>Mozi k√≥d</h2><input type="password" id="moziCode" onkeydown="if(event.key==='Enter') checkMoziCode()"><br><button onclick="checkMoziCode()">Bel√©p√©s</button><button onclick="closeMozi()">M√©gse</button><p id="moziError" style="color:red;"></p></div></div>
<div id="studiModal1" class="modal"><div class="modal-content"><h2>Tan√°ri k√≥d</h2><input type="password" id="studiCode1" onkeydown="if(event.key==='Enter') checkStudiCode(1)"><br><button onclick="checkStudiCode(1)">Bel√©p√©s</button><button onclick="closeStudi(1)">M√©gse</button><p id="studiError1" style="color:red;"></p></div></div>
<div id="clearMoziModal" class="modal"><div class="modal-content"><h2>Admin</h2><input type="password" id="clearMoziCode" onkeydown="if(event.key==='Enter') checkClearMoziCode()"><br><button onclick="checkClearMoziCode()">T√∂rl√©s</button><button onclick="closeClearMozi()">M√©gse</button></div></div>

<script>
const TEST_CODE = "caca123", MOZI_CODE = "caca123", TANAR_CODE = "TANAR2026", CLEAR_MOZI_CODE = "admin_mozi", STUDENT_CODE = "caca123";
const serverUrl = "https://marcell.qzz.io/";

function showContent(id) {
  document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
  document.querySelectorAll('.topnav a').forEach(a => a.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(document.getElementById(id+'Link')) document.getElementById(id+'Link').classList.add('active');
  document.getElementById("menu5r").style.display = "none";
  if(id === 'studiContent1') loadHomeworks();
}

function toggle5rMenu() {
  const m = document.getElementById("menu5r");
  m.style.display = (m.style.display === "block") ? "none" : "block";
}

// Modal funkci√≥k
function openTestProtected() { document.getElementById("testModal").style.display="block"; }
function closeTest() { document.getElementById("testModal").style.display="none"; }
function checkTestCode() { if(document.getElementById("testCode").value === TEST_CODE) { closeTest(); showContent('test'); loadFilesFromServer(); } else document.getElementById("testError").innerText="Hib√°s!"; }

function openMoziProtected() { document.getElementById("moziModal").style.display="block"; }
function closeMozi() { document.getElementById("moziModal").style.display="none"; }
function checkMoziCode() { if(document.getElementById("moziCode").value === MOZI_CODE) { closeMozi(); showContent('mozi'); } else document.getElementById("moziError").innerText="Hib√°s!"; }

function openStudiModal(n) { document.getElementById("studiModal1").style.display="block"; }
function closeStudi(n) { document.getElementById("studiModal1").style.display="none"; }
function checkStudiCode(n) { if(document.getElementById("studiCode1").value === TANAR_CODE) { closeStudi(1); showContent('studiContent1'); } else document.getElementById("studiError1").innerText="Hib√°s!"; }

// Tube f√°jlok list√°z√°sa
async function loadFilesFromServer() {
  showLoading();
  try {
    const res = await fetch(serverUrl);
    const files = await res.json();
    const list = document.getElementById("dynamicFileList");
    list.innerHTML = "";
    files.forEach(f => {
      if(f.name.endsWith('.mp4')) {
        list.innerHTML += `<a href="${serverUrl}${f.name}" class="file-item" target="_blank" style="display:block; color:#0f0; margin-bottom:10px;">‚ñ∂Ô∏è ${f.name}</a>`;
      }
    });
  } catch(e) { console.log("Hiba!"); }
  finally { hideLoading(); }
}

function filterFiles() {
  let val = document.getElementById("searchInput").value.toLowerCase();
  document.querySelectorAll(".file-item").forEach(i => i.style.display = i.innerText.toLowerCase().includes(val) ? "block" : "none");
}

// Mozi
function loadSeats() {
  const map = document.getElementById("seatMap"); map.innerHTML = "";
  for(let i=1; i<=12; i++) {
    const s = document.createElement("div"); s.className = "seat" + (localStorage.getItem("seat_"+i) ? " occupied" : "");
    s.onclick = () => { if(!s.classList.contains("occupied")) { const n = prompt("N√©v:"); if(n) { localStorage.setItem("seat_"+i, n); s.classList.add("occupied"); } } };
    map.appendChild(s);
  }
}
loadSeats();
function openClearMoziModal() { document.getElementById("clearMoziModal").style.display="block"; }
function closeClearMozi() { document.getElementById("clearMoziModal").style.display="none"; }
function checkClearMoziCode() { if(document.getElementById("clearMoziCode").value === CLEAR_MOZI_CODE) { localStorage.clear(); loadSeats(); closeClearMozi(); } }

// H√°zi feladatok
document.getElementById("homeworkForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const data = { tantargy: document.getElementById("subject").value, szoveg: document.getElementById("text").value, date: new Date().toLocaleString('hu-HU') };
  fetch(serverUrl + 'save-hazi', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(data) })
  .then(() => { loadHomeworks(); this.reset(); });
});

async function loadHomeworks() {
  try {
    const res = await fetch(serverUrl + 'hazifeladatok.json?t=' + Date.now());
    if(res.ok) {
      const h = await res.json();
      document.getElementById("submittedHomeworks").innerHTML = h.map(i => `<li style="margin-bottom:8px;">[${i.date}] <b>${i.subject}</b>: ${i.text}</li>`).join('');
    }
  } catch(e) {}
}

// Snake
let canvas = document.getElementById("snake-canvas"), ctx = canvas.getContext("2d"), box = 20, snake, food, d, score, gameInterval;
function startGameNow() { document.getElementById("playOverlay").style.display="none"; initSnake(); }
function initSnake() { clearInterval(gameInterval); d=null; score=0; snake=[{x:9*box, y:10*box}]; food={x:Math.floor(Math.random()*19+1)*box, y:Math.floor(Math.random()*19+1)*box}; gameInterval = setInterval(draw, 120); }
document.addEventListener("keydown", e => { if(e.keyCode==37 && d!="RIGHT") d="LEFT"; else if(e.keyCode==38 && d!="DOWN") d="UP"; else if(e.keyCode==39 && d!="LEFT") d="RIGHT"; else if(e.keyCode==40 && d!="UP") d="DOWN"; });
function draw() {
  ctx.fillStyle="black"; ctx.fillRect(0,0,400,400);
  snake.forEach((s,i) => { ctx.fillStyle=(i==0)?"#04AA6D":"white"; ctx.fillRect(s.x, s.y, box, box); });
  ctx.fillStyle="red"; ctx.fillRect(food.x, food.y, box, box);
  let headX = snake[0].x, headY = snake[0].y;
  if(d=="LEFT") headX-=box; if(d=="UP") headY-=box; if(d=="RIGHT") headX+=box; if(d=="DOWN") headY+=box;
  if(headX==food.x && headY==food.y) { score++; food={x:Math.floor(Math.random()*19+1)*box, y:Math.floor(Math.random()*19+1)*box}; } else { snake.pop(); }
  let newHead = {x:headX, y:headY};
  if(headX<0||headX>=400||headY<0||headY>=400||snake.some(s=>s.x==newHead.x && s.y==newHead.y)) { clearInterval(gameInterval); alert("V√©ge! Pont: "+score); document.getElementById("playOverlay").style.display="flex"; }
  snake.unshift(newHead); document.getElementById("scoreVal").innerText=score;
}

function showLoading() { document.getElementById("loadingOverlay").style.display="flex"; }
function hideLoading() { document.getElementById("loadingOverlay").style.display="none"; }


// Student HF 
// Modal nyit√°sa/z√°r√°sa
function openStudentModal() { document.getElementById("studentModal").style.display="block"; }
function closeStudentModal() { document.getElementById("studentModal").style.display="none"; }

// Jelsz√≥ ellen≈ërz√©s
function checkStudentCode() {
    if(document.getElementById("studentCode").value === STUDENT_CODE) {
        closeStudentModal();
        showContent('studentContent'); // Ez v√°lt a n√©zetre
        loadHomeworksForStudents();    // Ez t√∂lti be a list√°t
    } else {
        document.getElementById("studentError").innerText = "Hib√°s!";
    }
}

// Speci√°lis bet√∂lt≈ë a di√°koknak (ugyanazt a f√°jlt olvassa, de m√°shova √≠rja ki)
async function loadHomeworksForStudents() {
    try {
        const res = await fetch(serverUrl + 'hazifeladatok.json?t=' + Date.now());
        if(res.ok) {
            const h = await res.json();
            // A di√°kokn√°l a "studentHomeworksList" ID-j√∫ list√°ba rakjuk
            document.getElementById("studentHomeworksList").innerHTML = h.map(i => `<li style="margin-bottom:8px;">[${i.date}] <b>${i.subject}</b>: ${i.text}</li>`).join('');
        }
    } catch(e) { console.log("Hiba a bet√∂lt√©sn√©l."); }
}



</script>
</body>
</html>
